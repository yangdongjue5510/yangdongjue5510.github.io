<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    

    
    <title>스트림 더 알아보기 | mudura | 그거 뭐더라</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="Modern Java in Action">
    
    <meta name="description" content="a. 필터링스트림 요소를 선택하는 방법을 필터링이라고 한다.프레디케이트 필터링과 고유 요소만 필터링하는 방법에 대해 알아보자! 프레디케이트로 필터링하기프레디케이트를 인수로 받아 프레디케이트와 일치하는 모든 요소를 포함하는 스트림을 반환하는 방식을 말한다.대표적으로 filter method가 있다. 예시로 보자! 123List&lt;Dish&gt; veget">
<meta property="og:type" content="article">
<meta property="og:title" content="스트림 더 알아보기">
<meta property="og:url" content="https://yangdongjue5510.github.io/2021/07/30/java/java-basic/modern-java-in-action/modern4/index.html">
<meta property="og:site_name" content="mudura | 그거 뭐더라">
<meta property="og:description" content="a. 필터링스트림 요소를 선택하는 방법을 필터링이라고 한다.프레디케이트 필터링과 고유 요소만 필터링하는 방법에 대해 알아보자! 프레디케이트로 필터링하기프레디케이트를 인수로 받아 프레디케이트와 일치하는 모든 요소를 포함하는 스트림을 반환하는 방식을 말한다.대표적으로 filter method가 있다. 예시로 보자! 123List&lt;Dish&gt; veget">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-07-30T00:37:30.000Z">
<meta property="article:modified_time" content="2022-01-22T16:20:00.035Z">
<meta property="article:author" content="yangdongjue5510">
<meta property="article:tag" content="Modern Java in Action">
<meta name="twitter:card" content="summary">
    

    

    
        <link rel="icon" href="/css/images/favicon.png">
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.5.0/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=[object Object]"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '[object Object]');
</script>
<!-- End Google Analytics -->

    
    
    


<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/rss2.xml" title="mudura | 그거 뭐더라" type="application/rss+xml">
</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1>
                        <a href="/" style="font-size: 100px;color:#fff; text-decoration: none;">mudura</a>
                    </h1>    
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/">Computer Science</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/algorithm/">Algorithm</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/computer-structure/">Computer Structure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/data-structure/">Data Structure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/database/">Database</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/network/">Network</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/os/">OS</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/infra/">Infra</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/jpa/">JPA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/java/">Java</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/java/design-pattern/">Design Pattern</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/java/java-basic/">Java Basic</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/spring/">Spring</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/spring/boot/">Boot</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/spring/project/">Project</a></li></ul></li></ul>
                                
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" target="_blank" rel="external nofollow noopener noreferrer" href="https://about.me/yangdongjue5510/edit/details">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/java/">Java</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-java/java-basic/modern-java-in-action/modern4" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        스트림 더 알아보기
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2021/07/30/java/java-basic/modern-java-in-action/modern4/" class="article-date">
       <time datetime="2021-07-30T00:37:30.000Z" itemprop="datePublished">2021-07-30</time>
    </a>
  </div>


<div class="article-date">
  <i class="fa fa-calendar-plus-o"></i>
  <a href="/2021/07/30/java/java-basic/modern-java-in-action/modern4/" class="article-date">
     <time datetime="2022-01-22T16:20:00.035Z" itemprop="dateModified">2022-01-23</time>
  </a>
</div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/modern-java-in-action/" rel="tag">Modern Java in Action</a>
    </div>

                

                

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            

            

            

            <h1 id="a-필터링"><a href="#a-필터링" class="headerlink" title="a. 필터링"></a>a. 필터링</h1><p>스트림 요소를 선택하는 방법을 필터링이라고 한다.<br>프레디케이트 필터링과 고유 요소만 필터링하는 방법에 대해 알아보자!</p>
<h2 id="프레디케이트로-필터링하기"><a href="#프레디케이트로-필터링하기" class="headerlink" title="프레디케이트로 필터링하기"></a>프레디케이트로 필터링하기</h2><p>프레디케이트를 인수로 받아 프레디케이트와 일치하는 모든 요소를 포함하는 스트림을 반환하는 방식을 말한다.<br>대표적으로 filter method가 있다. 예시로 보자!</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Dish&gt; vegetarianMenu = menu.stream()</span><br><span class="line">                            .filter(Dish::isVegetarian)</span><br><span class="line">                            .collect(toList());</span><br></pre></td></tr></table></figure>

<h2 id="고유-요소-필터링"><a href="#고유-요소-필터링" class="headerlink" title="고유 요소 필터링"></a>고유 요소 필터링</h2><p>고유 요소로 이뤄진 스트림을 반환하는 distinct method를 지원한다.<br>여기서 고유 요소라는 말은 중복된 요소가 없는 요소를 의미한다.<br>중복된 요소를 검증은 hashCode, equals로 결정된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line">numbers.stream()</span><br><span class="line">        .flter(i -&gt; i%<span class="number">2</span> ==<span class="number">0</span>)</span><br><span class="line">        .distinct()</span><br><span class="line">        .forEach(System.out::println);<span class="comment">//2,4</span></span><br></pre></td></tr></table></figure>

<h1 id="b-스트림-슬라이싱"><a href="#b-스트림-슬라이싱" class="headerlink" title="b. 스트림 슬라이싱"></a>b. 스트림 슬라이싱</h1><p>스트림 요소를 선택하거나 스킵하는 여러 방법에 대해 알아보자.<br>프레디케이트 이용하기, 스트림 초기 몇 요소 무시하기, 특정 크기로 스트림 줄이기 등 다양한 방법이 있다.</p>
<h2 id="b-1-프레디케이트-takeWhile-활용"><a href="#b-1-프레디케이트-takeWhile-활용" class="headerlink" title="b-1. 프레디케이트 :takeWhile 활용"></a>b-1. 프레디케이트 :takeWhile 활용</h2><p>스트림의 요소(음식)들이 이미 칼로리로 정렬되어 있을 때, 특정 칼로리보다 높은 칼로리를 갖는 음식들만 보고 싶으면 어떻게 해야 될까?<br>이전에 배웠던 filter로 모든 요소를 확인해볼수 있지만, 요소들은 이미 칼로리로 정렬되어 있다.<br>즉 특정 칼로리와 비교 연산의 결과가 달라지는 순간부터는 굳이 다음 요소를 검증하지 않아도 된다는 의미다.<br>takeWhile은 처음 거짓이 나올 때까지 요소들을 모은다. 즉 거짓이 나오면 요소를 그만 모은다.<br>이를 takeWhile연산으로 구현할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Dish&gt; sliceMenu1 = specialMenu.stream()</span><br><span class="line">                                   .takeWhile(dish-&gt;dish.getCalories() &lt; <span class="number">320</span>)</span><br><span class="line">                                   .collect(toList());</span><br></pre></td></tr></table></figure>

<h2 id="b-2-프레디케이트-dropWhile-활용"><a href="#b-2-프레디케이트-dropWhile-활용" class="headerlink" title="b-2. 프레디케이트 :dropWhile 활용"></a>b-2. 프레디케이트 :dropWhile 활용</h2><p>takeWhile과는 달리 dropWhile은 정반대이다. 조건에 거짓이 되는 요소가 나오게 되면 그 지점에서 작업을 중단하고, 남은 모든 요소를 반환한다.<br>dropWhile은 무한한 남은 요소를 가진 무한 스트림에서도 동작한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Dish&gt; sliceMenu1</span><br><span class="line">    = specialMenu.stream()</span><br><span class="line">                 .takeWhile(dish-&gt;dish.getCalories()&lt;<span class="number">320</span>)</span><br><span class="line">                 .collect(toList());</span><br></pre></td></tr></table></figure>

<h2 id="b-3-스트림-축소-limit"><a href="#b-3-스트림-축소-limit" class="headerlink" title="b-3. 스트림 축소: limit"></a>b-3. 스트림 축소: limit</h2><p>주어진 값 이하의 요소를 갖는 스트림을 반환하는 limit(n)을 활용하면 스트림을 줄일 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Dish&gt; dishes = specialMenu.stream()</span><br><span class="line">                               .filter(dish-&gt;dish.getCalories() &gt; <span class="number">300</span>)</span><br><span class="line">                               .limit(<span class="number">3</span>)</span><br><span class="line">                               .collect(toList());</span><br></pre></td></tr></table></figure>

<p>처음 일치하는 n개의 요소만 반환한다.</p>
<h2 id="b-4-요소-건너뛰기-skip"><a href="#b-4-요소-건너뛰기-skip" class="headerlink" title="b-4. 요소 건너뛰기: skip"></a>b-4. 요소 건너뛰기: skip</h2><p>스트림으로 들어온 요소 n개를 제외한 스트림을 반환하는 skip(n) 메서드를 활용할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Dish&gt; dishes = menu.stream()</span><br><span class="line">                        .filter(d -&gt; d.getCalories() &gt; <span class="number">300</span>)</span><br><span class="line">                        .skip(<span class="number">2</span>)</span><br><span class="line">                        .collect(toList());</span><br></pre></td></tr></table></figure>

<h1 id="c-매핑"><a href="#c-매핑" class="headerlink" title="c. 매핑"></a>c. 매핑</h1><p>특정 객체에서 특정 데이터를 선택하는 map과 flatMap으로 매핑을 구현한다</p>
<h2 id="c-1-스트림의-각-요소에-함수-적용하기-map"><a href="#c-1-스트림의-각-요소에-함수-적용하기-map" class="headerlink" title="c-1. 스트림의 각 요소에 함수 적용하기: map"></a>c-1. 스트림의 각 요소에 함수 적용하기: map</h2><p>map은 함수를 인수로 받아 각 요소에 적용한 결과가 새로운 요소로 매핑된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; dishNames = menu.stream()</span><br><span class="line">                             .map(Dish::getName)</span><br><span class="line">                             .collect(toList());</span><br></pre></td></tr></table></figure>

<h2 id="c-2-스트림-평면화-flatMap"><a href="#c-2-스트림-평면화-flatMap" class="headerlink" title="c-2. 스트림 평면화: flatMap"></a>c-2. 스트림 평면화: flatMap</h2><p>자 flatMap을 배우기 전에, 이게 왜 필요한지 알아보자.<br>hello와 world라는 문자열 두개를 배열에 저장한 다음, 각 문자열의 고유문자만 모아 리스트에 넣어 반환하고 싶다고 하자.<br>우리가 원하는 결과물은 h,e,l,o,w,r,d를 가진 리스트다.</p>
<p>flatMap을 활용하지 않고 하면 시도를 하면 이렇게 된다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">words.stream()</span><br><span class="line">     .map(word-&gt;word.split(<span class="string">&quot;&quot;</span>))</span><br><span class="line">     .distinct()</span><br><span class="line">     .collect(toList());</span><br></pre></td></tr></table></figure>

<p>근데 이렇게 하면 map에서 해당 함수를 적용해도 문자배열을 가진 두 객체가 요소가 되는거지, 하나하나의 문자가 스트림요소가 되는게 아니다!<br>즉 {h,e,l,l,o}, {w,o,r,l,d} 이렇게 두 요소가 반환되는거지, h,e,l,l,o,w,o,r,l,d 이런 식으로 문자들이 다 요소가 되는 게 아니다.<br>결국 이렇게 하면 distinct 메소드는 두 요소를 비교하게 되는데, 두 요소는 엄연히 다른 요소이므로, 두 문자열 둘다 살아남게 된다.<br>이제 collect를 통해 문자열 두개를 포함한 리스트가 반환된다.</p>
<p>자 그러면 이제 flatMap을 활용해보자.<br>일단 우리가 원하는 목표를 달성하기 위해서는 배열 스트림이 아닌 문자열 스트림이 필요하다.<br>문자열을 받아 문자열 스트림으로 활용하려면, Arrays.stream() 메서드를 활용하면 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String[] arrayOfWords = &#123;<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>&#125;;</span><br><span class="line">Stream&lt;String&gt; streamOfWords = Arrays.stream(arrayOfWords);</span><br></pre></td></tr></table></figure>

<p>이런 파이프라인으로 하면 문자열 스트림이 생성된다.<br>이 파이프라인으로 우리가 원래 하려던 것을 해보자</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">words.stream()</span><br><span class="line">     .map(word -&gt;word.split(<span class="string">&quot;&quot;</span>))</span><br><span class="line">     .map(Arrays::stream) <span class="comment">//각 배열을 별도의 스트림으로 생성</span></span><br><span class="line">     .distinct()</span><br><span class="line">     .collect(toList());</span><br></pre></td></tr></table></figure>

<p>하지만 아직 문제가 있다. .map(Arrays::stream)을 하면, 각 문자열 배열들이 개별의 스트림이 되어<br>toList() 반환값이 List이 되어버린다. 즉 스트림을 가진 리스트가 되어버린다. 우리가 원하는건 문자열은 가진 리스트다.</p>
<p>이를 위해 flatMap을 도입하자. flatMap 각 배열을 스트림이 아닌 한 스트림의 컨텐츠로 매핑한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; uniqueCharacters =</span><br><span class="line">    words.stream()</span><br><span class="line">         .map(word-&gt;word.split(<span class="string">&quot;&quot;</span>))</span><br><span class="line">         .flatMap(Arrays::stream)</span><br><span class="line">         .distinct()</span><br><span class="line">         .collect(toList());</span><br></pre></td></tr></table></figure>

<h1 id="d-검색과-매칭"><a href="#d-검색과-매칭" class="headerlink" title="d. 검색과 매칭"></a>d. 검색과 매칭</h1><h2 id="d-1-anyMatch-프레디케이트가-적어도-한-요소와-일치하는지-확인"><a href="#d-1-anyMatch-프레디케이트가-적어도-한-요소와-일치하는지-확인" class="headerlink" title="d-1. anyMatch 프레디케이트가 적어도 한 요소와 일치하는지 확인"></a>d-1. anyMatch 프레디케이트가 적어도 한 요소와 일치하는지 확인</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(menu.stream().anyMatch(Dish::isVegetarian))&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;the menu is vegetarian friendly!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="d-2-allMatch-프레디케이트가-모든-요소와-일치하는지-검사"><a href="#d-2-allMatch-프레디케이트가-모든-요소와-일치하는지-검사" class="headerlink" title="d-2. allMatch 프레디케이트가 모든 요소와 일치하는지 검사"></a>d-2. allMatch 프레디케이트가 모든 요소와 일치하는지 검사</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isHealthy = menu.stream()</span><br><span class="line">                        .allMatch(dish -&gt; dish.getCalories()&lt;<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="d-3-noneMatch-프레디케이트와-일치하는-요소가-없는지-검사"><a href="#d-3-noneMatch-프레디케이트와-일치하는-요소가-없는지-검사" class="headerlink" title="d-3. noneMatch 프레디케이트와 일치하는 요소가 없는지 검사"></a>d-3. noneMatch 프레디케이트와 일치하는 요소가 없는지 검사</h2><p>allMatch와 반대 되는 메서드라고 생각하자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isHealthy = menu.stream().noneMatch(d-&gt;d.getCalories() &gt;= <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>이렇게 anyMatch, allMatch, noneMatch, findAny는 논리연산자 &amp;&amp;,||와 비슷하게 전체 스트림을 처리하지 않았더라도 결과를 반환할 수 있다.</p>
</blockquote>
<h3 id="이를-쇼트-서킷이라-부른다-특히-무한한-요소를-가진-스트림을-유한-요소-스트림으로-줄일-때-유용하다-limit도-포함"><a href="#이를-쇼트-서킷이라-부른다-특히-무한한-요소를-가진-스트림을-유한-요소-스트림으로-줄일-때-유용하다-limit도-포함" class="headerlink" title="이를 쇼트 서킷이라 부른다!(특히 무한한 요소를 가진 스트림을 유한 요소 스트림으로 줄일 때 유용하다!)(limit도 포함!)"></a>이를 쇼트 서킷이라 부른다!(특히 무한한 요소를 가진 스트림을 유한 요소 스트림으로 줄일 때 유용하다!)(limit도 포함!)</h3><h2 id="d-4-findAny-요소-검색해서-해당-요소-반환"><a href="#d-4-findAny-요소-검색해서-해당-요소-반환" class="headerlink" title="d-4. findAny 요소 검색해서 해당 요소 반환"></a>d-4. findAny 요소 검색해서 해당 요소 반환</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Dish&gt; dish = menu.stream()</span><br><span class="line">                          .filter(Dish::isVegetarian)</span><br><span class="line">                          .findAny();</span><br></pre></td></tr></table></figure>

<p>여기서 optional은 추후에 더 공부할 것이니 넘어가고, 지금은 조건에 맞는 요소들을 찾아 반환해준다는 사실만 확인하고 넘어가자.</p>
<h2 id="d-5-findFirst-논리적인-순서를-가진-스트림에서-첫번째-요소-찾기"><a href="#d-5-findFirst-논리적인-순서를-가진-스트림에서-첫번째-요소-찾기" class="headerlink" title="d-5. findFirst 논리적인 순서를 가진 스트림에서 첫번째 요소 찾기"></a>d-5. findFirst 논리적인 순서를 가진 스트림에서 첫번째 요소 찾기</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; someNumbers = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">Optional&lt;Integer&gt; firstSquareDivisibleByThree = someNumbers.stream()</span><br><span class="line">                                                           .map(n-&gt;n*n)</span><br><span class="line">                                                           .filter(n-&gt;n%<span class="number">3</span> ==<span class="number">0</span>)</span><br><span class="line">                                                           .findFirst(); <span class="comment">//9</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>findFirst와 findAny는 언제 사용하나?</p>
</blockquote>
<p>병렬 실행에서는 첫번째 요소를 찾기가 어렵다! 그럴 때 findFirst를 사용하고 그렇지 않으면, findAny를 사용한다!!</p>
<h1 id="e-리듀싱"><a href="#e-리듀싱" class="headerlink" title="e. 리듀싱"></a>e. 리듀싱</h1><p>리듀스 연산은 모든 스트림 요소를 처리해서 값으로 도출하는 연산이다.<br>함수형 프로그래밍 언어로는 폴드라고 부른다.</p>
<h2 id="d-1-reduce-요소의-합"><a href="#d-1-reduce-요소의-합" class="headerlink" title="d-1. reduce 요소의 합"></a>d-1. reduce 요소의 합</h2><p>요소의 합을 구하는 reduce에는 일반적으로 두 개의 파라미터가 필요하다.<br>하나는 누적값의 초기값, 두 요소를 조합해서 새로운 값을 만드는 BinaryOperator (보통 람다로 표현).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> product = numbers.stream().reduce(<span class="number">1</span>, (a,b)-&gt;a*b);</span><br></pre></td></tr></table></figure>

<p>위 코드는 1부터 시작해서, 1+첫요소가 다시 누적값이 되고 (1+첫요소)+두번째요소가 되는 식이다.(물론 얘도 다음 요소와 연산될 때는 누적값이 된다.)</p>
<blockquote>
<p>초기값을 받지 않는 reduce도 있다. Optional을 반환한다.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Integer&gt; sum = numbers.stream().reduce((a, b) -&gt; (a+b));</span><br></pre></td></tr></table></figure>

<h2 id="d-2-reduce로-최댓값-최솟값-찾기"><a href="#d-2-reduce로-최댓값-최솟값-찾기" class="headerlink" title="d-2. reduce로 최댓값 최솟값 찾기"></a>d-2. reduce로 최댓값 최솟값 찾기</h2><p>최대 최소를 구할 때는 reduce의 초기값(누적)이 필요가 없다. 그저 요소를 순서대로 받아 max연산을 하면 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;Integer&gt; max = numbers.stream().reduce(Integer::max);</span><br><span class="line">Optional&lt;Integer&gt; min = numbers.stream().reduce(Integer::min);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>reduce 메서드의 장점과 병렬화</p>
</blockquote>
<p>반복으로 합계를 구하는 것과 reduce의 차이는 뭘까?<br>reduce는 스트림이므로, 내부 구현으로 병렬로 실행할 수 있다.</p>
<h2 id="스트림-연산-상태-없음과-상태-있음"><a href="#스트림-연산-상태-없음과-상태-있음" class="headerlink" title="스트림 연산 : 상태 없음과 상태 있음"></a>스트림 연산 : 상태 없음과 상태 있음</h2><p>map, filter는 각 요소를 하나씩 받아 결과를 출력 스트림으로 보내는 내부 상태를 갖지 않는 연산이다.<br>한편 reduce, sum, max 같은 연산은 결과를 누적할 내부 상태가 필요하다. 스트림의 요소 수와 관계없이 내부 상태의 크기는 한정적이다.<br>하지만 sorted, distinct는 요소를 하나하나 받아 결과를 출력 스트림으로 보내는 연산이 아니라, 모든 요소를 버퍼에 추가하여 결과를 출력 스트림으로 보내는 연산이다.<br>이런 연산들은 무한 스트림을 입력받으면 안된다. 예를 들어 모든 소수를 담은 무한 스트림을 sorted 할 수 있을까? 세상에서 가장 큰 소수가 맨 앞으로 와야되는데, 그런 연산은 불가능하다!. 이런 연산들을 우리는 내부 상태를 갖는 연산이라고 한다.</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="https://yangdongjue5510.github.io/2021/07/30/java/java-basic/modern-java-in-action/modern4/" data-id="cldwpody100e1zfa0gzgphp9t" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "yangdongjue5510"
        },
        "headline": "스트림 더 알아보기",
        "image": "https://yangdongjue5510.github.io",
        "keywords": "Modern Java in Action",
        "genre": "Java",
        "datePublished": "2021-07-30",
        "dateCreated": "2021-07-30",
        "dateModified": "2022-01-23",
        "url": "https://yangdongjue5510.github.io/2021/07/30/java/java-basic/modern-java-in-action/modern4/",
        "description": "a. 필터링스트림 요소를 선택하는 방법을 필터링이라고 한다.프레디케이트 필터링과 고유 요소만 필터링하는 방법에 대해 알아보자!
프레디케이트로 필터링하기프레디케이트를 인수로 받아 프레디케이트와 일치하는 모든 요소를 포함하는 스트림을 반환하는 방식을 말한다.대표적으로 filter method가 있다. 예시로 보자!
123List&lt;Dish&gt; veget",
        "wordCount": 1914
    }
</script>

</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/yangdongjue5510" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2021/07/30/java/java-basic/modern-java-in-action/modern5/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            다양한 형태의 스트림 만들기
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2021/07/30/java/java-basic/modern-java-in-action/modern3/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">스트림에 대해 간략하게 알아보자</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/">Computer Science</a><span class="category-list-count">74</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/algorithm/">Algorithm</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/algorithm/problem-solving/">Problem Solving</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/algorithm/theory/">Theory</a><span class="category-list-count">15</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/computer-structure/">Computer Structure</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/data-structure/">Data Structure</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/database/">Database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/network/">Network</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/os/">OS</a><span class="category-list-count">15</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/infra/">Infra</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jpa/">JPA</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">Java</a><span class="category-list-count">60</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/design-pattern/">Design Pattern</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-basic/">Java Basic</a><span class="category-list-count">22</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">Spring</a><span class="category-list-count">41</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/spring/boot/">Boot</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/project/">Project</a><span class="category-list-count">23</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/clean-code/" style="font-size: 11.43px;">Clean Code</a> <a href="/tags/clean-software/" style="font-size: 10px;">Clean Software</a> <a href="/tags/effective-java/" style="font-size: 15.71px;">Effective Java</a> <a href="/tags/kotlin-in-action/" style="font-size: 18.57px;">Kotlin in Action</a> <a href="/tags/modern-java-in-action/" style="font-size: 17.14px;">Modern Java in Action</a> <a href="/tags/software-engineering-at-google/" style="font-size: 10px;">Software Engineering At Google</a> <a href="/tags/greedy/" style="font-size: 10px;">greedy</a> <a href="/tags/reshapi-project/" style="font-size: 10px;">reshapi project</a> <a href="/tags/sable-project/" style="font-size: 10px;">sable project</a> <a href="/tags/troubleshooting/" style="font-size: 12.86px;">troubleShooting</a> <a href="/tags/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/" style="font-size: 14.29px;">오브젝트</a> <a href="/tags/%EC%9A%B0%EC%95%84%ED%95%9C%ED%85%8C%ED%81%AC%EC%BD%94%EC%8A%A4/" style="font-size: 20px;">우아한테크코스</a> <a href="/tags/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EC%99%80-%EC%A0%95%EB%B3%B4%EA%B8%B0%EC%88%A0%EC%9D%98-%EC%9B%90%EB%A6%AC/" style="font-size: 10px;">운영체제와 정보기술의 원리</a> <a href="/tags/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/" style="font-size: 10px;">자바 ORM 표준 JPA 프로그래밍</a>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2023 yangdongjue5510</p>
                
                <p>Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme by <a href="https://github.com/ppoffice" target="_blank" rel="external nofollow noopener noreferrer">PPOffice</a></p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

    </div>
    
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'https://yangdongjue5510.github.io/2021/07/30/java/java-basic/modern-java-in-action/modern4/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    

    
    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


</body>
</html>
