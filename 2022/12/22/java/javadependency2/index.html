<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    

    
    <title>의존성 분리를 통해 설계 개선하기 2편 (우아한객체지향) | mudura | 그거 뭐더라</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content>
    
    <meta name="description" content="도메인 컨셉 문제점사용자가 가게에서 메뉴 A를 골라서 장바구니에 저장해놓은 상태에서 가게 주인이 메뉴 A의 세부 내용을 바꾸면 사용자 장바구니에 있는 메뉴 A와 가게에서 판매 중인 메뉴 A의 불일치가 생긴다.그래서 이제 주문할 때마다 사용자가 주문하려는 메뉴 A가 실제 가게에서 판매 중인 메뉴 A와 일치하는 지 검증하려고 한다. 주문 검증 메뉴 이름 &amp;#x">
<meta property="og:type" content="article">
<meta property="og:title" content="의존성 분리를 통해 설계 개선하기 2편 (우아한객체지향)">
<meta property="og:url" content="https://yangdongjue5510.github.io/2022/12/22/java/javadependency2/index.html">
<meta property="og:site_name" content="mudura | 그거 뭐더라">
<meta property="og:description" content="도메인 컨셉 문제점사용자가 가게에서 메뉴 A를 골라서 장바구니에 저장해놓은 상태에서 가게 주인이 메뉴 A의 세부 내용을 바꾸면 사용자 장바구니에 있는 메뉴 A와 가게에서 판매 중인 메뉴 A의 불일치가 생긴다.그래서 이제 주문할 때마다 사용자가 주문하려는 메뉴 A가 실제 가게에서 판매 중인 메뉴 A와 일치하는 지 검증하려고 한다. 주문 검증 메뉴 이름 &amp;#x">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://yangdongjue5510.github.io/img/storeAndMenuDomainConcept.png">
<meta property="article:published_time" content="2022-12-22T13:37:19.000Z">
<meta property="article:modified_time" content="2022-12-23T16:12:55.980Z">
<meta property="article:author" content="yangdongjue5510">
<meta property="article:tag" content="mudura dev blog powered by yangdongjue5510">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yangdongjue5510.github.io/img/storeAndMenuDomainConcept.png">
    

    

    
        <link rel="icon" href="/css/images/favicon.png">
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.5.0/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=[object Object]"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '[object Object]');
</script>
<!-- End Google Analytics -->

    
    
    


<meta name="generator" content="Hexo 5.4.1"><link rel="alternate" href="/rss2.xml" title="mudura | 그거 뭐더라" type="application/rss+xml">
</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1>
                        <a href="/" style="font-size: 100px;color:#fff; text-decoration: none;">mudura</a>
                    </h1>    
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/">Computer Science</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/algorithm/">Algorithm</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/computer-structure/">Computer Structure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/data-structure/">Data Structure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/database/">Database</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/network/">Network</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/computer-science/os/">OS</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/infra/">Infra</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/jpa/">JPA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/java/">Java</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/java/design-pattern/">Design Pattern</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/java/java-basic/">Java Basic</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/spring/">Spring</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/spring/boot/">Boot</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/spring/project/">Project</a></li></ul></li></ul>
                                
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" target="_blank" rel="external nofollow noopener noreferrer" href="https://about.me/yangdongjue5510/edit/details">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/java/">Java</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-java/javadependency2" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        의존성 분리를 통해 설계 개선하기 2편 (우아한객체지향)
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2022/12/22/java/javadependency2/" class="article-date">
       <time datetime="2022-12-22T13:37:19.000Z" itemprop="datePublished">2022-12-22</time>
    </a>
  </div>


<div class="article-date">
  <i class="fa fa-calendar-plus-o"></i>
  <a href="/2022/12/22/java/javadependency2/" class="article-date">
     <time datetime="2022-12-23T16:12:55.980Z" itemprop="dateModified">2022-12-24</time>
  </a>
</div>


                

                
                

                

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            

            

            

            <h1 id="도메인-컨셉"><a href="#도메인-컨셉" class="headerlink" title="도메인 컨셉"></a>도메인 컨셉</h1><p><img src="/img/storeAndMenuDomainConcept.png" alt="가게와 메뉴"><br><img src="/img/orderDomainConcept.png" alt="주문"></p>
<h1 id="문제점"><a href="#문제점" class="headerlink" title="문제점"></a>문제점</h1><p>사용자가 가게에서 메뉴 A를 골라서 장바구니에 저장해놓은 상태에서 가게 주인이 메뉴 A의 세부 내용을 바꾸면 사용자 장바구니에 있는 메뉴 A와 가게에서 판매 중인 메뉴 A의 불일치가 생긴다.<br>그래서 이제 주문할 때마다 사용자가 주문하려는 메뉴 A가 실제 가게에서 판매 중인 메뉴 A와 일치하는 지 검증하려고 한다.</p>
<h2 id="주문-검증"><a href="#주문-검증" class="headerlink" title="주문 검증"></a>주문 검증</h2><ol>
<li>메뉴 이름 &#x3D;&#x3D; 주문 항목의 이름</li>
<li>옵션 그룹의 이름 &#x3D;&#x3D; 주문 옵션 그룹 이름</li>
<li>옵션 이름 &#x3D;&#x3D; 주문 옵션 이름</li>
<li>옵션 가격 &#x3D;&#x3D; 주문 옵션의 가격</li>
<li>가게가 영업중인지 확인</li>
<li>주문금액 &gt;&#x3D; 최소 주문 금액</li>
</ol>
<p><img src="/img/orderFlow.png" alt="주문 검증 협력 흐름"></p>
<p>이런 식으로 협력 구조를 잡으면 어떻게든 런타임에서 같은 방향으로 의존성을 가져야 한다.<br>그렇다면 의존성의 방향을 어떤 종류의 의존성으로 구현할 지 선택하면 된다. 협력은 연관관계와 의존관계로 구현할 수 있다.</p>
<h3 id="연관관계"><a href="#연관관계" class="headerlink" title="연관관계"></a>연관관계</h3><p>연관관계는 영구적인 탐색 구조이다. 매우 빈번하게 협력해야 하는 경우에 사용한다.<br>연관 관계는 탐색 가능성을 의미한다. 즉 객체 A를 알면 객체 B를 탐색할 수 있음을 의미한다.</p>
<blockquote>
<p>일반적인 연관관계 구현 방식 : 객체 참조</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderLineItem&gt; orderLineItems;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">voidrplace</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Long <span class="title">getShopId</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Money <span class="title">getTotalPrice</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">        validate()</span><br><span class="line">        ordered();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">for</span> (OrderLineItem orderLineItem : orderLineItems) &#123;</span><br><span class="line">            orderLineItem.validate(); <span class="comment">// 협력!</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>참고로 연관관계는 개념이고 객체 참조는 그 개념의 구현방법이다. 연관관계가 즉 객체 참조는 아니다!</p>
<p>지금 예시의 도메인 모델에서는 다음과 같이 연관관계를 객체 참조로 가지고 있다<br><img src="/img/orderClassDiagram.png"></p>
<h1 id="설계-진화시키기"><a href="#설계-진화시키기" class="headerlink" title="설계 진화시키기"></a>설계 진화시키기</h1><p>설계를 개선하기 위해서는 의존성을 그려보자. 의존성이 순환하는 경우는 코드를 잘못 나눴거나 같이 있어야 할 코드를 잘못 위치시킨 것을 판단할 수 있다.</p>
<h2 id="대표적인-문제"><a href="#대표적인-문제" class="headerlink" title="대표적인 문제"></a>대표적인 문제</h2><ol>
<li>객체 참조로 결합도 상승</li>
<li>패키지 의존성 사이클</li>
</ol>
<p><img src="/img/orderPackageCycle.png" alt="패키지 의존성 사이클"><br>위 그림을 보면 알 수 있듯이 <code>shop</code> 패키지와 <code>order</code> 패키지가 서로 의존성이 순환되고 있다. 이렇게 되면 의존성 방향이 잘못 됐거나 패키지 분리를 잘못한 것이다.</p>
<p>자 이제 이런 문제를 해결하는 몇가지 방법을 배워보자</p>
<h2 id="중간-객체-이용해서-의존성-사이클-끊기"><a href="#중간-객체-이용해서-의존성-사이클-끊기" class="headerlink" title="중간 객체 이용해서 의존성 사이클 끊기"></a>중간 객체 이용해서 의존성 사이클 끊기</h2><p><img src="/img/middleObjectClassDiagram.png" alt="중간 객체를 사용한 예시 클래스 다이어그램"><br>중간 객체를 둬서 두 패키지 간 의존성이 한 방향으로 흐르게 만들었다.<br>이렇게 구현하면 <code>OrderOptionGroup</code>을 통해 <code>OptionGroup</code>을 생성하고 <code>OptionGroupSpecification</code>이 생성된 <code>OptionGroup</code>과 비교하여 데이터 불일치를 검증하는 방식으로 구현한다.</p>
<h2 id="객체-참조의-문제점"><a href="#객체-참조의-문제점" class="headerlink" title="객체 참조의 문제점."></a>객체 참조의 문제점.</h2><ol>
<li>성능 문제 : 어디까지 조회 할 것인가?</li>
<li>수정 시 도메인 규칙을 함께 적용할 경계는? : 즉 트랜잭션의 범위가 어디까지인가?</li>
</ol>
<h3 id="수정-시-도메인-규칙을-함께-적용할-경계-문제"><a href="#수정-시-도메인-규칙을-함께-적용할-경계-문제" class="headerlink" title="수정 시 도메인 규칙을 함께 적용할 경계 문제"></a>수정 시 도메인 규칙을 함께 적용할 경계 문제</h3><p>간단한 예시를 들어보자.<br>배달 완료됐음을 알리는 서비스 로직이 있다.</p>
<ol>
<li>주문 객체의 상태를 배달 완료로 변경</li>
<li>가게 객체의 수수료를 부과</li>
<li>배달 객체의 상태를 배달 완료로 변경</li>
</ol>
<p>언뜻 보면 이 세 객체를 한 트랜잭션으로 묶어서 수정하는 게 큰 문제가 없어보인다.<br>그러나 문제는 주문, 가게, 배달 이 세가지 객체의 트랜잭션 주기가 다르다는 사실이다!</p>
<p>가게는 주인이 가게 정보를 바꾸려고 할 때도 트랜잭션이 걸릴 수 있다.<br>주문은 고객이 주문을 취소할 때도 트랜잭션이 걸릴 수 있다.<br>배달은 배달 성공 실패에 트랜잭션이 걸릴 수 있다.</p>
<p>즉 만약 개발자가 서비스의 모든 가게 객체의 특정 정보를 일괄 수정하는 트랜잭션을 실행한다고 가정하자.<br>우리가 개발한 배달 완료 로직은 개발자가 수행한 모든 가게 정보 수정 트랜잭션이 완료될 때까지 기다려야 될 것이다!!!<br>이는 트랜잭션 주기가 다른 여러 객체들이 한 트랜잭션에 묶여있어서 생긴 문제이다!</p>
<blockquote>
<p>그렇다면 언제 객체 참조를 해야하나?<br>도메인 규칙마다 다르다. 생명 주기가 같은 객체. 즉 같이 생성되고 같이 제거되는 객체는 객체 참조할 법하다.<br>혹은 도메인 제약 사항을 공유하는 객체들을 함께 묶어라! (도메인 제약 사항에 다른 객체가 필요한 경우!)<br>이렇게 객체 참조로 연결된 단위는 트랜잭션&#x2F;조회&#x2F;비즈니스 제약의 단위이다!</p>
</blockquote>
<h3 id="객체-참조-문제-해결법-레포지토리를-활용한-간접-참조"><a href="#객체-참조-문제-해결법-레포지토리를-활용한-간접-참조" class="headerlink" title="객체 참조 문제 해결법 : 레포지토리를 활용한 간접 참조"></a>객체 참조 문제 해결법 : 레포지토리를 활용한 간접 참조</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shop</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long shopId;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Shop shop = shopRepository.findById(order.getShopId());</span><br></pre></td></tr></table></figure>

<p>이렇게 구현하면 <code>Shop</code>과 <code>Order</code> 사이의 강한 결합이 제거된다!</p>
<h3 id="검증-로직은-Validator-객체를-만들어서-도입하기"><a href="#검증-로직은-Validator-객체를-만들어서-도입하기" class="headerlink" title="검증 로직은 Validator 객체를 만들어서 도입하기"></a>검증 로직은 Validator 객체를 만들어서 도입하기</h3><p>문제는 이렇게 구현하면 기존에 객체들이 가지고 있던 검증 로직을 도메인 객체에서 수행할 수 없게 된다!<br>Validator라는 객체를 만들어서 주입해서 사용하는 건 어떨까?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderValidator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ShopRepository shopRepository;</span><br><span class="line">    <span class="keyword">private</span> MenuRepository menuRepository;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OrderValidator</span><span class="params">(ShopRepository shopRepository,</span></span></span><br><span class="line"><span class="params"><span class="function">                          MenuRepository menuRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shopRepository = shopRepository;</span><br><span class="line">        <span class="keyword">this</span>.menuRepository = menuRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">(Order order)</span> </span>&#123;</span><br><span class="line">        validate(order, getShop(order), getMenus(order));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">validate</span><span class="params">(Order order, Shop shop, Map&lt;Long, Menu&gt; menus)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!shop.isOpen()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;가게가 영업중이 아닙니다.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (order.getOrderLineItems().isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">&quot;주문 항목이 비어 있습니다.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!shop.isValidOrderAmount(order.calculateTotalPrice())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(String.format(<span class="string">&quot;최소 주문 금액 %s 이상을 주문해주세요.&quot;</span>, shop.getMinOrderAmount()));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (OrderLineItem item : order.getOrderLineItems()) &#123;</span><br><span class="line">            validateOrderLineItem(item, menus.get(item.getMenuId()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>이런 방식이 낯설 수 있다. 객체가 주도적으로 행동하는 것이 아닌 외부에 따로 객체를 만들어서 검증 책임을 하는 것처럼 보인다. 이런 방식은 객체지향적이지 않은 대신 제약조건을 한 눈에 볼 수 있고, 객체들의 응집도(검증 로직과 비즈니스 로직이 하나의 객체가 아닌 다른 객체로 분리)가 높아진다.</p>
<h3 id="다른-서비스-객체를-만들어서-도입하기"><a href="#다른-서비스-객체를-만들어서-도입하기" class="headerlink" title="다른 서비스 객체를 만들어서 도입하기"></a>다른 서비스 객체를 만들어서 도입하기</h3><p>그리고 객체 참조를 제거하면 다른 문제가 또 생긴다. 배달 완료 로직에서 객체 참조가 끊겨서 객체 내부에서 협력을 통해 로직을 실행 시킬 수 없다<br>-&gt; 그렇다면 다른 Service를 객체를 추가해서 로직을 절차지향적으로 구성할 수 있다!</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderDeliveredService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deliverOrder</span><span class="params">(Long orderId)</span> </span>&#123;</span><br><span class="line">        Order order = orderRepository.findById(orderId);</span><br><span class="line">        Shop shop = shopRepository.findById(order.getShopId());</span><br><span class="line">        Delivery delivery = deliveryRepository.findById(orderId);</span><br><span class="line"></span><br><span class="line">        order.delivered();</span><br><span class="line">        shop.billComissionFee(order.calculateTotalPrice());</span><br><span class="line">        delivery.complete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이 서비스를 주입받아서 사용하면 된다. 이때 서비스를 새로 만들면서 의존성 사이클이 도는 경우는 DIP를 활용한 인터페이스를 추가해서 적용해보자. 이 방법은 객체간의 결합도를 낮추는 대신 로직간의 결합도를 높이는 방법이다.</p>
<h3 id="도메인-이벤트-퍼블리싱"><a href="#도메인-이벤트-퍼블리싱" class="headerlink" title="도메인 이벤트 퍼블리싱"></a>도메인 이벤트 퍼블리싱</h3><p>위 방법들 외에도 도메인 이벤트 퍼블리싱 방법을 사용할 수 있다. 도메인 이벤트는 객체 간 결합은 최대한 느슨하게 하는 방법이다.<br>도메인 객체가 이벤트 객체를 발행하면 다른 패키지의 이벤트 리스너들이 이를 감지해 해당 패키지의 도메인 객체에게 알리는 방식이다.</p>
<p>주문 완료의 예시에서는</p>
<ol>
<li><code>Order</code> 객체가 배달 완료됐다는 메시지를 받는다.</li>
<li><code>Order</code>는 <code>OrderDeliveredEvent</code>라는 이벤트를 발행한다</li>
<li><code>shop</code> 패키지는 발행된 이벤트를 감지해 가게에 수수료를 부과하는 로직을 실행한다.</li>
<li><code>delivery</code> 패키지도 발행된 이벤트를 감지해 <code>Delivery</code> 객체의 상태를 완료로 변경한다.</li>
</ol>
<h3 id="도메인-이벤트-발행-코드로-이해하기"><a href="#도메인-이벤트-발행-코드로-이해하기" class="headerlink" title="도메인 이벤트 발행 코드로 이해하기"></a>도메인 이벤트 발행 코드로 이해하기</h3><p>이런 식으로 <code>Order</code> 객체는 이제 이벤트를 발행하기만 한다. 다른 패키지 도메인 객체에는 관심이 없다.<br>예제는 Spring Data의 <code>AbstractAggregatedRoot</code>를 상속받아서 <code>registerEvent</code> 메서드를 활용해서 이벤트를 등록한다. <code>registerEvent</code> 메서드는 이벤트를 모아놨다가 DB에 커밋될 때 이벤트를 발행한다. 이런 클래스의 도움을 받기 보다는 직접 구현하는 게 낫다고 한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> <span class="keyword">extends</span> <span class="title">AbstractAggregatedRoot</span>&lt;<span class="title">Order</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delivered</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.orderStatus = OrderStatus.DELIVERED;</span><br><span class="line">        registerEvent(<span class="keyword">new</span> OrderDeliveredEvent(<span class="keyword">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderDeliveredEvent</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Order order;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getOrderId</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getShopId</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Money <span class="title">getTotalPrice</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이벤트 발행을 받는 쪽(shop 패키지)은 Spring의 이벤트 리스너를 활용해서 이벤트 핸들러를어만들어 사용하면 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BillShopWithOrderDeliveredEventHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">// DI 생략...</span></span><br><span class="line">    <span class="meta">@Async</span> <span class="comment">//비동기로 처리. 동기로도 가능</span></span><br><span class="line">    <span class="meta">@EventListener</span></span><br><span class="line">    <span class="meta">@Transactional</span> <span class="comment">// 다른 트랜잭션으로 분리해서도 가능</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(OrderDeliveredEvent event)</span> </span>&#123;</span><br><span class="line">        Shop shop = shopRepository.findById(event.getShopId());</span><br><span class="line">        shop.billCommissionFee(event.getTotalPrice());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>문제는 이렇게 이벤트와 관련된 객체를 만들고 나서 다시 의존성 사이클이 발생할 수 있다는 사실이다.<br>이벤트를 받아 처리하는 리스너에서 파라미터로 <code>order</code> 패키지의 이벤트를 받도록 했기 때문에 <code>shop</code>과 <code>order</code>가 서로 의존하고 있다.</p>
<p><img src="/img/orderClassDiagramWithEvents.png"></p>
<p>이 문제는 <code>order</code>에서 발행한 이벤트를 처리하는 이벤트 핸들러가 <code>shop</code> 패키지에 있기 때문이다!<br>그렇다면 문제가 되는 이벤트 핸들러를 패키지 분리하면 어떨까?</p>
<p><img src="/img/orderClassDiagramWithEventsAddBilling.png" alt="billing 패키지를 추가해봤다."></p>
<p>그리고 이벤트 핸들러가 의존하던 수수료 관련 코드를 <code>Shop</code>과 분리하자!</p>
<p>기존의 <code>Shop</code> 객체는 다음과 같이 수수료 모으는 코드가 존재했었다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shop</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Ratio commissionRate;</span><br><span class="line">    <span class="keyword">private</span> Money commissin = Money.Zero;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">billCommissionFee</span><span class="params">(Money price)</span> </span>&#123;</span><br><span class="line">        commission = commission.plus(commissionRate.of(price));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이를 <code>Billing</code> 이란 객체를 도입해서 역할을 분리하자!!!</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Billing</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long shopId;</span><br><span class="line">    <span class="keyword">private</span> Money commission = Money.ZERO;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">billCommissionFee</span><span class="params">(Money commission)</span> </span>&#123;</span><br><span class="line">        commission = commission.plus(commission);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shop</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Ratio commissionRate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Money <span class="title">calculateCommissionFee</span><span class="params">(Money price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> commissionRate.of(price);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>그리고 이벤트 핸들러도 <code>shop</code>과 <code>billing</code>을 구분해서 협력하도록 하자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BillShopWithOrderDeliveredEventHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">// DI 생략...</span></span><br><span class="line">    <span class="meta">@Async</span> <span class="comment">//비동기로 처리. 동기로도 가능</span></span><br><span class="line">    <span class="meta">@EventListener</span></span><br><span class="line">    <span class="meta">@Transactional</span> <span class="comment">// 다른 트랜잭션으로 분리해서도 가능</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(OrderDeliveredEvent event)</span> </span>&#123;</span><br><span class="line">        Shop shop = shopRepository.findById(event.getShopId());</span><br><span class="line">        Billing billing = billingRepository.findById(event.getShopId());</span><br><span class="line">        billing.billCommissionFee(shop.calculateCommissionFee(event.getTotalPrice()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이러면 패키지끼리 순환하지 않게 된다!<br><img src="/img/billingClassDiagram.png"></p>
<h3 id="패키지-의존성-사이클-제거하는-세가지-방법-정리"><a href="#패키지-의존성-사이클-제거하는-세가지-방법-정리" class="headerlink" title="패키지 의존성 사이클 제거하는 세가지 방법 정리!"></a>패키지 의존성 사이클 제거하는 세가지 방법 정리!</h3><ol>
<li>중간 객체 추가!</li>
<li>의존성 역전 시키기! -&gt; 새로운 서비스 객체를 사용할 때 생긴 의존성 제거에 유용했다.</li>
<li>새로운 패키지 추가! -&gt; 도메인 이벤트 퍼블리싱을 사용할 때 생긴 의존성 제거에 유용했다.</li>
</ol>
<h2 id="의존성과-시스템-분리"><a href="#의존성과-시스템-분리" class="headerlink" title="의존성과 시스템 분리"></a>의존성과 시스템 분리</h2><p>도메인 패키지 간의 의존성 사이클을 제거하면 각 패키지를 분리해서 배포할 수 있게된다!<br>그리고 이벤트는 메시징을 통해 외부 시스템으로 보내줄 수 있다!<br><img src="/img/%08systemDevidedWithEvent.png"></p>

        </div>
        <footer class="article-footer">
            



    <a data-url="https://yangdongjue5510.github.io/2022/12/22/java/javadependency2/" data-id="cldkgipqz0018uca0g0bgeqs2" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "yangdongjue5510"
        },
        "headline": "의존성 분리를 통해 설계 개선하기 2편 (우아한객체지향)",
        "image": "https://yangdongjue5510.github.io/img/storeAndMenuDomainConcept.png",
        "keywords": "",
        "genre": "Java",
        "datePublished": "2022-12-22",
        "dateCreated": "2022-12-22",
        "dateModified": "2022-12-24",
        "url": "https://yangdongjue5510.github.io/2022/12/22/java/javadependency2/",
        "description": "도메인 컨셉
문제점사용자가 가게에서 메뉴 A를 골라서 장바구니에 저장해놓은 상태에서 가게 주인이 메뉴 A의 세부 내용을 바꾸면 사용자 장바구니에 있는 메뉴 A와 가게에서 판매 중인 메뉴 A의 불일치가 생긴다.그래서 이제 주문할 때마다 사용자가 주문하려는 메뉴 A가 실제 가게에서 판매 중인 메뉴 A와 일치하는 지 검증하려고 한다.
주문 검증
메뉴 이름 &#x",
        "wordCount": 2201
    }
</script>

</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/yangdongjue5510" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2022/12/23/java/java-basic/design-pattern/facadeAndMediator/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            퍼사드와 미디에이터 패턴
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2022/12/22/java/javaDependency1/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">의존성 분리를 통해 설계 개선하기 1편 (우아한객체지향)</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/">Computer Science</a><span class="category-list-count">74</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/algorithm/">Algorithm</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/algorithm/problem-solving/">Problem Solving</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/algorithm/theory/">Theory</a><span class="category-list-count">15</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/computer-structure/">Computer Structure</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/data-structure/">Data Structure</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/database/">Database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/network/">Network</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-science/os/">OS</a><span class="category-list-count">15</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/infra/">Infra</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jpa/">JPA</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">Java</a><span class="category-list-count">60</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/design-pattern/">Design Pattern</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/java-basic/">Java Basic</a><span class="category-list-count">22</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">Spring</a><span class="category-list-count">41</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/spring/boot/">Boot</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/project/">Project</a><span class="category-list-count">23</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/clean-code/" style="font-size: 11.67px;">Clean Code</a> <a href="/tags/clean-software/" style="font-size: 10px;">Clean Software</a> <a href="/tags/effective-java/" style="font-size: 16.67px;">Effective Java</a> <a href="/tags/kotlin-in-action/" style="font-size: 18.33px;">Kotlin in Action</a> <a href="/tags/modern-java-in-action/" style="font-size: 18.33px;">Modern Java in Action</a> <a href="/tags/software-engineering-at-google/" style="font-size: 10px;">Software Engineering At Google</a> <a href="/tags/greedy/" style="font-size: 10px;">greedy</a> <a href="/tags/reshapi-project/" style="font-size: 10px;">reshapi project</a> <a href="/tags/sable-project/" style="font-size: 10px;">sable project</a> <a href="/tags/troubleshooting/" style="font-size: 13.33px;">troubleShooting</a> <a href="/tags/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/" style="font-size: 15px;">오브젝트</a> <a href="/tags/%EC%9A%B0%EC%95%84%ED%95%9C%ED%85%8C%ED%81%AC%EC%BD%94%EC%8A%A4/" style="font-size: 20px;">우아한테크코스</a> <a href="/tags/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EC%99%80-%EC%A0%95%EB%B3%B4%EA%B8%B0%EC%88%A0%EC%9D%98-%EC%9B%90%EB%A6%AC/" style="font-size: 10px;">운영체제와 정보기술의 원리</a> <a href="/tags/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/" style="font-size: 10px;">자바 ORM 표준 JPA 프로그래밍</a>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2023 yangdongjue5510</p>
                
                <p>Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme by <a href="https://github.com/ppoffice" target="_blank" rel="external nofollow noopener noreferrer">PPOffice</a></p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

    </div>
    
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'https://yangdongjue5510.github.io/2022/12/22/java/javadependency2/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    

    
    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


</body>
</html>
